<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Sports AI Coach Chatbot</title>
<style>
    body {
        background: #f5f5f5;
        font-family: Arial;
        margin: 0;
        padding: 0;
        display: flex;
        justify-content: center;
    }
    .chat-container {
        width: 420px;
        background: white;
        margin-top: 40px;
        border-radius: 12px;
        box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        padding: 20px;
    }
    h2 {
        text-align: center;
        margin-bottom: 20px;
    }
    #chat {
        height: 380px;
        overflow-y: auto;
        padding-right: 10px;
    }
    .msg {
        margin-bottom: 16px;
        animation: fadeIn 0.4s ease;
    }
    .me {
        text-align: right;
        color: #0084ff;
    }
    .ai {
        text-align: left;
        color: #333;
    }
    .bubble {
        display: inline-block;
        padding: 10px 14px;
        border-radius: 12px;
        max-width: 75%;
        line-height: 1.4;
    }
    .me .bubble {
        background: #d9ecff;
    }
    .ai .bubble {
        background: #eee;
    }
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(8px); }
        to { opacity: 1; transform: translateY(0); }
    }
    .suggestions {
        margin-top: 8px;
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
    }
    .sug-btn {
        background: #f0f0f0;
        padding: 6px 10px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 13px;
        border: 1px solid #ccc;
    }
    .sug-btn:hover {
        background: #e4e4e4;
    }
    #inputBox {
        width: 75%;
        padding: 10px;
        margin-top: 10px;
    }
    #sendBtn {
        padding: 10px 20px;
        margin-left: 6px;
    }
</style>
</head>
<body>

<div class="chat-container">
    <h2>Sports AI Coach Chatbot</h2>

    <div id="chat">
        <div class="msg ai"><div class="bubble">챗봇 준비됨...</div></div>
    </div>

    <input id="inputBox" placeholder="질문을 입력하세요..." />
    <button id="sendBtn">전송</button>
</div>

<script>
async function sendMessage(text) {
    const chat = document.getElementById("chat");

    chat.innerHTML += 
        <div class="msg me"><div class="bubble"></div></div>
    ;
    chat.scrollTop = chat.scrollHeight;

    const res = await fetch("/api/ask", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ question: text })
    });

    const data = await res.json();

    chat.innerHTML += 
        <div class="msg ai"><div class="bubble"></div></div>
    ;

    if (data.suggestions) {
        let sugBtns = data.suggestions
            .map(s => <div class="sug-btn" onclick="quickSend('')"></div>)
            .join("");

        chat.innerHTML += <div class="suggestions"></div>;
    }

    chat.scrollTop = chat.scrollHeight;
}

document.getElementById("sendBtn").onclick = () => {
    let text = document.getElementById("inputBox").value;
    if (!text) return;
    sendMessage(text);
    document.getElementById("inputBox").value = "";
};

document.getElementById("inputBox").addEventListener("keypress", e => {
    if (e.key === "Enter") {
        document.getElementById("sendBtn").click();
    }
});

function quickSend(text) {
    document.getElementById("inputBox").value = text;
    document.getElementById("sendBtn").click();
}
</script>

</body>
</html>
