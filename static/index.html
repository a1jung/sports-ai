<!DOCTYPE html>
<html lang='ko'>
<head>
<meta charset='UTF-8'>
<title>Sports AI Coach Chatbot</title>
<style>
body { font-family: Arial; margin:20px; background:#f0f2f5; }
#chat { border:1px solid #ccc; padding:10px; width:600px; max-width:95%; height:400px; overflow-y:auto; background:white; border-radius:8px; }
.message { margin:5px 0; }
.user { color:blue; }
.ai { color:green; }
.recs { margin-top:10px; font-size:0.9em; color:#555; }
input { width:80%; padding:8px; }
button { padding:8px; }
</style>
</head>
<body>
<h2>Sports AI Coach Chatbot</h2>
<div id="chat"></div>
<div>
<input type='text' id='question' placeholder='질문을 입력하세요...' onkeydown='if(event.key==="Enter"){sendQuestion();}'>
<button onclick='sendQuestion()'>전송</button>
</div>
<script>
async function sendQuestion(){
    const q = document.getElementById("question").value.trim();
    if(!q) return;
    appendMessage("USER", q);
    document.getElementById("question").value="";
    const resp = await fetch("/api/ask", {
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({question:q})
    });
    const data = await resp.json();
    appendMessage("AI", data.answer);
    appendRecs(data.recommendations);
}

function appendMessage(sender, msg){
    const div = document.createElement("div");
    div.className="message "+(sender==="USER"?"user":"ai");
    div.innerText = sender + ": " + msg;
    const chat = document.getElementById("chat");
    chat.appendChild(div);
    chat.scrollTop = chat.scrollHeight;
}

function appendRecs(recs){
    const chat = document.getElementById("chat");
    let div = document.getElementById("recs");
    if(div) div.remove();
    div = document.createElement("div");
    div.className="recs";
    div.id="recs";
    div.innerText = "추천 질문: " + recs.join(", ");
    chat.appendChild(div);
    chat.scrollTop = chat.scrollHeight;
}
</script>
</body>
</html>
